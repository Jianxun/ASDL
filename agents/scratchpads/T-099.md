# T-099 Literalize IFIR names during atomization

## Task summary (DoD + verify)
- Emit literal names (no pattern delimiters) for IFIR port_order, nets, instances, and conns during atomization.
- Treat any token that includes pattern delimiters as a pattern token and carry its original token in `pattern_origin`, including single-atom expansions.
- Update the NFIR->IFIR converter to use literal names and propagate `pattern_origin` from atomization.
- Refresh parser-level atomization tests to reflect the new origin semantics.
- Verify: `pytest tests/unit_tests/parser/test_pattern_atomization.py -v`

## Read (paths)
- agents/context/lessons.md
- agents/context/contract.md
- agents/context/tasks.yaml
- agents/context/tasks_state.yaml
- agents/context/project_status.md

## Plan
- Inspect pattern atomization + NFIR->IFIR conversion paths and current tests.
- Update atomization to emit literal names and set pattern_origin for any token with pattern delimiters.
- Update NFIR->IFIR converter to use literal names and propagate pattern_origin.
- Refresh parser-level atomization tests and verify.

## Todo list
- [x] Update pattern atomization origin semantics in `src/asdl/patterns.py` and refresh parser atomization tests.
- [x] Emit literal IFIR names in pattern atomization pass and NFIR->IFIR converter.
- [x] Run parser atomization tests and record results.

## Progress log
- 2026-01-xx: Initialized scratchpad.
- 2026-01-xx: Understanding: adjust pattern atomization so IFIR names use literal atoms, set `pattern_origin` for any token with pattern delimiters (even single-atom), update NFIR->IFIR converter to use literal names and propagate origin, and refresh parser-level atomization tests.
- 2026-01-xx: Updated atomization to emit literal IFIR names and adjusted pattern origin semantics; parser atomization tests refreshed.

## Patch summary
- Updated pattern atomization origin handling and parser-level tests.
- Switched IFIR atomization/conversion to literal names for ports, nets, instances, and conns.

## PR URL
- TBD

## Verification
- `./venv/bin/pytest tests/unit_tests/parser/test_pattern_atomization.py -v`

## Status request
- In Progress

## Blockers / Questions
- None yet.

## Next steps
- Inspect pattern atomization and converter code, then implement literal name + origin changes.
