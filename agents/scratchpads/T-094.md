# Task summary (DoD + verify)
- Extend PatternAtomizePass to enforce that endpoint instance atoms resolve to declared instance atoms and to materialize per-atom instance params using patterned-parameter expansion rules (broadcast/zip with diagnostics).
- Add tests for subset endpoint bindings and parameter expansion diagnostics.
- Verify: pytest tests/unit_tests/ir/test_pattern_atomization.py -v

# Read (paths)
- agents/context/lessons.md
- agents/context/contract.md
- agents/context/tasks.yaml
- agents/context/tasks_state.yaml
- agents/context/project_status.md

# Plan
- [x] Update task state + branch; outline subtasks.
- [x] Implement endpoint validation + per-atom param materialization in PatternAtomizePass.
- [x] Add tests for endpoint subset bindings and parameter expansion diagnostics.
- [x] Run verify.

# Progress log
- 2026-01-13: Initialized scratchpad.
- 2026-01-13: Added atomized param expansion and endpoint instance validation.
- 2026-01-13: Added subset endpoint and param diagnostics tests.
- 2026-01-13: Verified pattern atomization tests.

# Patch summary
- Added per-atom param materialization and endpoint instance diagnostics to PatternAtomizePass.
- Added tests for subset endpoint bindings and parameter expansion diagnostics.

# PR URL

# Verification
- pytest tests/unit_tests/ir/test_pattern_atomization.py -v

# Status request (Done / Blocked / In Progress)
In Progress

# Blockers / Questions

# Next steps
- Open PR and update task status.
