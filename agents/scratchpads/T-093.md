# Task summary (DoD + verify)
- Implement PatternAtomizePass to expand multi-atom net/instance pattern tokens into per-atom IFIR ops using atomization helpers, carrying pattern_origin metadata for derived names.
- Validate literal-name collisions within nets and within instances with clear diagnostics, and handle base-less pattern forwarding.
- Add tests for base-less forwarding and collision diagnostics.
- Verify: pytest tests/unit_tests/ir/test_pattern_atomization.py -v

# Read (paths)
- agents/context/lessons.md
- agents/context/contract.md
- agents/context/tasks.yaml
- agents/context/tasks_state.yaml
- agents/context/project_status.md

# Plan
- Update task state + branch; outline subtasks.
- Add tests for base-less forwarding + collision diagnostics.
- Implement PatternAtomizePass core expansion + diagnostics.
- Run verify; update scratchpad and task state; open PR.

# Progress log
- 2026-01-13: Initialized scratchpad.
- 2026-01-13: Added IR tests for base-less forwarding and literal collision diagnostics.
- 2026-01-13: Implemented PatternAtomizePass with atomization, origin propagation, and collision checks.
- 2026-01-13: Verified pattern atomization tests.

# Patch summary
- Added PatternAtomizePass implementation for IFIR atomization and diagnostics.
- Added IR unit tests for base-less forwarding and literal collision errors.

# PR URL
https://github.com/Jianxun/ASDL/pull/100

# Verification
- pytest tests/unit_tests/ir/test_pattern_atomization.py -v

# Status request (Done / Blocked / In Progress)
Done

# Blockers / Questions

# Next steps
- Await review.
