schema_version: 2

current_sprint:
  - id: T-285
    title: Normalize structured instance declarations in AST-to-PatternedGraph lowering
    owner: Executor
    dod: >
      Ensure lowering accepts both inline instance strings and structured
      instance objects (`ref` + optional `parameters`) by using the shared
      instance parsing helper. Structured instances must no longer raise raw
      exceptions during lowering; malformed instance payloads must emit
      lowering diagnostics instead.
    verify:
      - ./venv/bin/pytest tests/unit_tests/core/test_patterned_graph_lowering.py tests/unit_tests/e2e/test_pipeline_mvp.py -v
    links:
      scratchpad: agents/scratchpads/T-285_structured_instance_lowering_fix.md
      adr: agents/adr/ADR-0031-instance-parameter-syntax.md
      spec: docs/specs/spec_ast.md
    files:
      - src/asdl/lowering/ast_to_patterned_graph_instances.py
      - src/asdl/ast/instance_expr.py
      - tests/unit_tests/core/test_patterned_graph_lowering.py
      - tests/unit_tests/e2e/test_pipeline_mvp.py
  - id: T-286
    title: Add dedicated regression coverage for structured instance lowering and netlist CLI
    owner: Executor
    depends_on:
      - T-285
    dod: >
      Add explicit regression tests that fail if structured instance forms crash
      or diverge from inline semantics in end-to-end netlist generation. Cover at
      least one positive case and one malformed case that must report diagnostics
      rather than raising exceptions.
    verify:
      - ./venv/bin/pytest tests/unit_tests/core/test_patterned_graph_lowering.py tests/unit_tests/cli/test_netlist.py -v
    links:
      scratchpad: agents/scratchpads/T-286_structured_instance_regressions.md
      adr: agents/adr/ADR-0031-instance-parameter-syntax.md
      spec: docs/specs/spec_netlist_emission.md
    files:
      - tests/unit_tests/core/test_patterned_graph_lowering.py
      - tests/unit_tests/cli/test_netlist.py
      - tests/e2e/diagnostics/manifest.yaml
      - tests/e2e/diagnostics/README.md
backlog: []
