schema_version: 2

current_sprint:
  - id: T-303
    title: Emit reachable-only module set from final resolved top realization
    owner: Executor
    dod: >
      Change netlist emission traversal to root at the final resolved top
      realization after view binding and emit only modules reachable from that
      top via transitive instance references. Unreachable authored/original
      module definitions must not be emitted. Preserve deterministic traversal
      and output ordering for reachable modules. Include regression updates in
      netlist and CLI tests that prove unreachable module blocks are pruned and
      top-level instantiation targets the final resolved top realization.
    verify:
      - ./venv/bin/pytest tests/unit_tests/views/test_view_apply.py tests/unit_tests/netlist/test_netlist_render_netlist_ir.py tests/unit_tests/cli/test_netlist.py -k "reachable or view or top" -v
    links:
      scratchpad: agents/scratchpads/T-303_reachable_only_emission.md
      adr: agents/adr/ADR-0036-reachable-only-emission-for-final-view-top.md
      spec: docs/specs/spec_asdl_views.md
    files:
      - src/asdl/views/api.py
      - src/asdl/emit/netlist/api.py
      - src/asdl/emit/netlist/render.py
      - tests/unit_tests/cli/test_netlist.py
      - tests/unit_tests/netlist/test_netlist_render_netlist_ir.py
      - tests/unit_tests/views/test_view_apply.py
  - id: T-304
    title: Preserve canonical realized naming under reachable-only emission
    owner: Executor
    depends_on:
      - T-303
    dod: >
      Keep emitted name policy consistent with ADR-0036 while enforcing
      uniqueness only within the reachable module set: default/undecorated and
      `cell@default` emit as `cell`; non-default emits as `cell_<view>`;
      collisions allocate deterministic ordinal suffixes (`__2`, `__3`, ...).
      Ensure mixed-view realized variants remain deterministic and readable
      without reintroducing occurrence-specialized naming. Include regression
      updates in CLI/view/netlist tests for `emission_name_map`, warning
      counts/messages, and deterministic naming under reachable-only emission.
    verify:
      - ./venv/bin/pytest tests/unit_tests/netlist/test_netlist_render_netlist_ir.py tests/unit_tests/netlist/test_netlist_emitter.py tests/unit_tests/views/test_view_resolver.py tests/unit_tests/cli/test_netlist.py -k "view or collision or default or deterministic or emission_name_map or warning" -v
    links:
      scratchpad: agents/scratchpads/T-304_reachable_naming_collision.md
      adr: agents/adr/ADR-0036-reachable-only-emission-for-final-view-top.md
      spec: docs/specs/spec_asdl_view_config.md
    files:
      - src/asdl/cli/__init__.py
      - src/asdl/emit/netlist/render.py
      - src/asdl/emit/netlist/diagnostics.py
      - tests/unit_tests/cli/test_netlist.py
      - tests/unit_tests/netlist/test_netlist_render_netlist_ir.py
      - tests/unit_tests/netlist/test_netlist_emitter.py
      - tests/unit_tests/views/test_view_resolver.py

backlog: []
