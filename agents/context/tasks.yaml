schema_version: 2

current_sprint: []

backlog:
  - id: T-078
    title: Propagate per-entry source spans into NFIR/IFIR
    owner: Executor
    dod: >
      Capture YAML locations for `nets` and `instances` map entries during parsing
      and store them as ModuleDecl private metadata. Use these locations to set
      `src` on NFIR NetOp/InstanceOp and carry them through NFIR->IFIR so
      downstream diagnostics resolve to file/line/col. Update IR diagnostics
      tests so errors tied to net/instance data include non-null spans.
    verify:
      - pytest tests/unit_tests/ir -v
    files:
      - src/asdl/ast/models.py
      - src/asdl/ast/parser.py
      - src/asdl/ir/converters/ast_to_nfir.py
      - src/asdl/ir/converters/nfir_to_ifir.py
      - tests/unit_tests/ir/test_converter.py
    links:
      scratchpad: agents/scratchpads/T-078_diagnostics_spans_ir.md
  - id: T-079
    title: End-to-end diagnostics span coverage
    owner: Executor
    dod: >
      Add e2e diagnostics tests that run parse/lower/emit flows with known
      failures and assert each emitted diagnostic has a populated
      `primary_span` (no `NO_SPAN_NOTE`). Cover at least one error from the
      parser, IR lowering, and netlist verification/emission stages.
    verify:
      - pytest tests/unit_tests/e2e -v
    files:
      - tests/unit_tests/e2e/test_pipeline_mvp.py
      - tests/unit_tests/netlist/test_netlist_emitter.py
    links:
      scratchpad: agents/scratchpads/T-079_diagnostics_spans_e2e.md
  - id: T-064
    title: Pattern endpoint equivalence
    owner: Executor
    dod: >
      Ensure NFIR verification treats word-sense-equivalent pattern tokens as the same instance (e.g., `MN_OUT<P,N>` vs `MN_OUT<P|N>`) by comparing the expansion outputs instead of raw strings. Add IR/unit tests plus the `examples/scratch/test.asdl` netlist run to prove the pipeline no longer rejects those bindings.
    verify:
      - pytest tests/unit_tests/ir -v
      - ./venv/bin/asdlc netlist examples/scratch/test.asdl
    files:
      - src/asdl/ir/nfir/dialect.py
      - src/asdl/ir/converters/nfir_to_ifir.py
      - tests/unit_tests/ir/test_ifir_converter.py
      - examples/scratch/test.asdl
    links:
      scratchpad: agents/scratchpads/T-064_pattern_equivalence.md
exploration_candidates:
  - IFIR diagnostics spans: mapping strategy, edge cases, and test fixtures.
  - CLI pipeline UX: command flow, error messaging, and file layout.
  - Netlist emission validation: strictness vs warnings; validation stages.
  - xDSL pipeline boundaries: pass split/merge opportunities and IR boundaries.
  - Codebase map gaps: navigation audit for future Executors.
