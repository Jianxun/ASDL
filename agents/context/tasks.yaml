schema_version: 2

current_sprint:
  - id: T-133
    title: Ast to GraphIR conversion context refactor
    owner: Executor
    dod: >
      Introduce conversion context objects for AST->GraphIR (session + document),
      extract symbol/ID allocation helpers into new modules, and update the
      top-level conversion flow to use the new context without changing
      behavior or diagnostics.
    verify:
      - venv/bin/pytest tests/unit_tests/ir -v
    files:
      - src/asdl/ir/converters/ast_to_graphir.py
      - src/asdl/ir/converters/ast_to_graphir_context.py
      - src/asdl/ir/converters/ast_to_graphir_symbols.py
    links:
      scratchpad: agents/scratchpads/T-133_ast_to_graphir_context.md
  - id: T-132
    title: Ast to GraphIR pattern metadata integration
    owner: Executor
    depends_on:
      - T-133
    dod: >
      Update AST->GraphIR conversion to register pattern expression table
      entries, attach pattern_origin metadata to atomized nets/instances/
      endpoints and instance params, and expand endpoint expressions as a whole
      before splitting on '.'. Binding logic remains in ast_to_graphir.py.
    verify: []
    files:
      - src/asdl/ir/converters/ast_to_graphir.py
      - src/asdl/ir/patterns/expr_table.py
      - src/asdl/ir/patterns/origin.py
      - src/asdl/ir/patterns/endpoint_split.py
      - src/asdl/ir/graphir/ops_graph.py
    links:
      scratchpad: agents/scratchpads/T-132_ast_to_graphir_pattern_metadata.md
  - id: T-134
    title: Ast to GraphIR parsing and utils split
    owner: Executor
    depends_on:
      - T-132
    dod: >
      Extract instance/net/endpoint parsing helpers and diagnostic/attr
      utilities into dedicated modules, updating AST->GraphIR conversion to
      use the shared helpers without changing behavior or error messaging.
    verify:
      - venv/bin/pytest tests/unit_tests/ir -v
    files:
      - src/asdl/ir/converters/ast_to_graphir.py
      - src/asdl/ir/converters/ast_to_graphir_parsing.py
      - src/asdl/ir/converters/ast_to_graphir_utils.py
    links:
      scratchpad: agents/scratchpads/T-134_ast_to_graphir_parsing_utils.md
  - id: T-135
    title: Ast to GraphIR lowering split
    owner: Executor
    depends_on:
      - T-132
    dod: >
      Move module/device lowering helpers into a dedicated lowering module and
      slim the AST->GraphIR fa√ßade to orchestration only, preserving the public
      API and behavior.
    verify:
      - venv/bin/pytest tests/unit_tests/ir -v
    files:
      - src/asdl/ir/converters/ast_to_graphir.py
      - src/asdl/ir/converters/ast_to_graphir_lowering.py
    links:
      scratchpad: agents/scratchpads/T-135_ast_to_graphir_lowering_split.md
backlog: []

exploration_candidates:
  - IFIR diagnostics spans: mapping strategy, edge cases, and test fixtures.
  - CLI pipeline UX: command flow, error messaging, and file layout.
  - Netlist emission validation: strictness vs warnings; validation stages.
  - xDSL pipeline boundaries: pass split/merge opportunities and IR boundaries.
  - Codebase map gaps: navigation audit for future Executors.
