schema_version: 2

current_sprint:
  - id: T-193
    title: Add stateless verifiers for AtomizedGraph
    owner: Executor
    depends_on: [T-199, T-202]
    dod: >
      Add pure verification helpers for the atomized core graph that validate
      unique net/instance names, endpoint references, and endpoint ports against
      module/device ports lists in the atomized program. Define diagnostic codes
      used by the verifiers and add unit tests.
    verify:
      - venv/bin/pytest tests/unit_tests/core/test_atomized_graph_verify.py -v
    files:
      - src/asdl/core/verify_atomized_graph.py
      - src/asdl/core/atomized_graph.py
      - tests/unit_tests/core/test_atomized_graph_verify.py
      - docs/specs/spec_diagnostic_codes.md
    links:
      spec: docs/specs_refactor/spec_refactor_atomized_graph.md
      scratchpad: agents/scratchpads/T-193_atomized_graph_verify.md
  - id: T-199
    title: Add device definitions and ports lists to core graphs
    owner: Executor
    dod: >
      Extend PatternedGraph and AtomizedGraph core dataclasses with device
      definitions (stable ID, name, file_id, ports list, optional params/vars/
      attrs). Replace module port_order with a canonical ports list (empty list
      allowed, never None) and add builder support for devices/ports while
      preserving compatibility for existing callers.
    verify:
      - venv/bin/python -m py_compile src/asdl/core/graph.py src/asdl/core/atomized_graph.py src/asdl/core/graph_builder.py src/asdl/core/__init__.py
    files:
      - src/asdl/core/graph.py
      - src/asdl/core/atomized_graph.py
      - src/asdl/core/graph_builder.py
      - src/asdl/core/__init__.py
    links:
      scratchpad: agents/scratchpads/T-199_core_graph_ports_devices.md
  - id: T-200
    title: Populate PatternedGraph devices and ports in lowering
    owner: Executor
    depends_on: [T-199]
    dod: >
      Update AST -> PatternedGraph lowering to populate device definitions and
      module ports lists (empty list when absent). Update core PatternedGraph
      tests to assert ports lists and device definitions.
    verify:
      - venv/bin/pytest tests/unit_tests/core/test_patterned_graph_lowering.py tests/unit_tests/core/test_patterned_graph.py -v
    files:
      - src/asdl/lowering/ast_to_patterned_graph.py
      - src/asdl/lowering/ast_to_patterned_graph_nets.py
      - tests/unit_tests/core/test_patterned_graph_lowering.py
      - tests/unit_tests/core/test_patterned_graph.py
    links:
      scratchpad: agents/scratchpads/T-200_patterned_graph_ports_devices.md
  - id: T-201
    title: Update PatternedGraph dump for ports and devices
    owner: Executor
    depends_on: [T-199, T-200]
    dod: >
      Update PatternedGraph JSON dump helpers to emit ports lists and device
      definitions. Adjust dump tests for the new JSON shape.
    verify:
      - venv/bin/pytest tests/unit_tests/core/test_patterned_graph_dump.py -v
    files:
      - src/asdl/core/dump.py
      - tests/unit_tests/core/test_patterned_graph_dump.py
    links:
      scratchpad: agents/scratchpads/T-201_patterned_graph_dump_ports_devices.md
  - id: T-202
    title: Propagate ports and devices into AtomizedGraph
    owner: Executor
    depends_on: [T-199, T-200]
    dod: >
      Update PatternedGraph -> AtomizedGraph lowering to consume module ports
      lists, propagate device definitions into the atomized program, and ensure
      atomized modules always carry ports lists. Update atomization tests.
    verify:
      - venv/bin/pytest tests/unit_tests/core/test_patterned_graph_atomize.py -v
    files:
      - src/asdl/lowering/patterned_graph_to_atomized.py
      - src/asdl/lowering/patterned_graph_to_atomized_instances.py
      - tests/unit_tests/core/test_patterned_graph_atomize.py
    links:
      scratchpad: agents/scratchpads/T-202_atomized_ports_devices.md
backlog: []
