{
  "models": {
    "cap_unit": {
      "C": "1e-12",
      "model": "mimcap"
    },
    "jumper": {
      "model": "jumper"
    },
    "nmos_unit": {
      "L": "0.18u",
      "M": "${M}",
      "NF:2": null,
      "W": "2u",
      "model": "nfet_3v3"
    },
    "pmos_unit": {
      "L": "0.18u",
      "M": "${M}",
      "NF:2": null,
      "W": "2u",
      "model": "pfet_3v3"
    }
  },
  "modules": {
    "bias_vbn_diode": {
      "circuits": {
        "J1": {
          "model": "jumper",
          "nets": {
            "p1": "iref",
            "p2": "vbn"
          },
          "parameters": {}
        },
        "MN_bias": {
          "model": "nmos_unit",
          "nets": {
            "B": "VSS",
            "D": "iref",
            "G": "vbn",
            "S": "vss"
          },
          "parameters": {
            "M": "${M}"
          }
        }
      },
      "name": "bias_vbn_diode",
      "nets": {
        "iref": "in",
        "vbn": "out",
        "vss": "io"
      },
      "notes": {
        "layout": "match all current source devices driven by vbn"
      },
      "parameters": {
        "M": 1
      }
    },
    "common_source_amp": {
      "circuits": {
        "MN_LOAD": {
          "model": "nmos_unit",
          "nets": {
            "B": "VSS",
            "D": "out",
            "G": "vbn",
            "S": "vss"
          },
          "parameters": {
            "M": "${M}"
          }
        },
        "MP_DRV": {
          "model": "pmos_unit",
          "nets": {
            "B": "VDD",
            "D": "out",
            "G": "in",
            "S": "vdd"
          },
          "parameters": {
            "M": "${M}"
          }
        }
      },
      "name": "common_source_amp",
      "nets": {
        "in": "in",
        "out": "out",
        "vbn": "in",
        "vdd": "io",
        "vss": "io"
      },
      "notes": {},
      "parameters": {
        "M": 1
      }
    },
    "current_mirror_pmos_1_1": {
      "circuits": {
        "MP_{ref,out}": {
          "model": "pmos_unit",
          "nets": {
            "B": "VDD",
            "D": "{ref, out}",
            "G": "ref",
            "S": "vdd"
          },
          "parameters": {
            "M": "${M}"
          }
        }
      },
      "name": "current_mirror_pmos_1_1",
      "nets": {
        "out": "out",
        "ref": "in",
        "vdd": "io"
      },
      "notes": {},
      "parameters": {
        "M": 1
      }
    },
    "diff_pair_nmos": {
      "circuits": {
        "MN_{P,N}": {
          "model": "nmos_unit",
          "nets": {
            "B": "VSS",
            "D": "out_{p,n}",
            "G": "in_{p,n}",
            "S": "tail"
          },
          "parameters": {
            "M": "${M}"
          }
        }
      },
      "name": "diff_pair_nmos",
      "nets": {
        "in_{p,n}": "in",
        "out_{p,n}": "out",
        "tail": "io"
      },
      "notes": {
        "layout": "cross quad common centroid, use even number of M"
      },
      "parameters": {
        "M": 2
      }
    },
    "ota": {
      "circuits": {
        "Cc": {
          "model": "cap_unit",
          "nets": {
            "p1": "stg1_out",
            "p2": "out"
          },
          "parameters": {
            "M": "${M.Cc}"
          }
        },
        "dummy_devices": {
          "model": null,
          "nets": {},
          "parameters": {}
        },
        "stage1": {
          "model": "ota_one_stage",
          "nets": {
            "in_{p,n}": "in_{p,n}",
            "out": "stg1_out",
            "vbn": "vbn",
            "vdd": "vdd",
            "vss": "vss"
          },
          "parameters": {
            "M": {
              "diff": "${M.diff}",
              "load": "${M.load}",
              "tail": "${M.tail}"
            }
          }
        },
        "stage2": {
          "model": "common_source_amp",
          "nets": {
            "in": "stg1_out",
            "out": "out",
            "vbn": "vbn",
            "vdd": "vdd",
            "vss": "vss"
          },
          "parameters": {
            "M": "${M.stage2}"
          }
        },
        "vbn_gen": {
          "model": "bias_vbn_diode",
          "nets": {
            "iref": "iref",
            "vbn": "vbn",
            "vss": "vss"
          },
          "parameters": {
            "M": "${M.bias_diode}"
          }
        }
      },
      "name": "ota",
      "nets": {
        "in_{p,n}": "in",
        "iref": "in",
        "out": "out",
        "stg1_out": "internal",
        "vdd": "io",
        "vss": "io"
      },
      "notes": {
        "layout": [
          "symmetric horizontal layout",
          "Deep n-well for the full ota. NTAP guard ring.",
          "Horizontal M4 for VDD and VSS, sizing for < 1ohm resistance",
          "back annotation dummy devices"
        ],
        "sizing": [
          "100uA nominal bias reference current",
          "size stage 1 for noise performance",
          "size stage 2 for load driving and linearity requirements",
          "size miller cap to meet the phase margin specs"
        ],
        "specs": [
          "DC gain: 65dB",
          "GBW: 100MHz",
          "CMRR: 60dB",
          "Offset: 2mV",
          "HD3: -80dBc at 1V p-p output swing",
          "Phase margin: 65 degrees",
          "Noise: 10nV/sqrt(Hz) at 1MHz",
          "Flicker noise corner: 100kHz",
          "Power: minimize"
        ]
      },
      "parameters": {
        "Cc": "1pF",
        "M": {
          "Cc": 1,
          "bias_diode": 1,
          "diff": 4,
          "load": 4,
          "stage2": 8,
          "tail": 8
        }
      }
    },
    "ota_one_stage": {
      "circuits": {
        "MN_TAIL": {
          "model": "nmos_unit",
          "nets": {
            "B": "VSS",
            "D": "n_tail",
            "G": "vbn",
            "S": "vss"
          },
          "parameters": {
            "M": "${M.tail}"
          }
        },
        "diff": {
          "model": "diff_pair_nmos",
          "nets": {
            "in_{p,n}": "in_{p,n}",
            "out_{p,n}": "{n_d, out}",
            "tail": "n_tail"
          },
          "parameters": {
            "M": "${M.diff}"
          }
        },
        "load": {
          "model": "current_mirror_pmos_1_1",
          "nets": {
            "out": "out",
            "ref": "n_d",
            "vdd": "vdd"
          },
          "parameters": {
            "M": "${M.load}"
          }
        }
      },
      "name": "ota_one_stage",
      "nets": {
        "in_{p,n}": "in",
        "n_d": "internal",
        "n_tail": "internal",
        "out": "out",
        "vbn": "in",
        "vdd": "io",
        "vss": "io"
      },
      "notes": {},
      "parameters": {
        "M": {
          "diff": 2,
          "load": 2,
          "tail": 4
        }
      }
    }
  },
  "top_module": "ota",
  "version": "ASDL v1.0"
}