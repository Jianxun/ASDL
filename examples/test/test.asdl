file_info:
  top_module: test
  doc: "Test ASDL file"

imports:
  analoglib: ../libs/analoglib.asdl
  #gf180mcu: ../libs/gf180mcu.asdl
  gf180mcu_std_tile: ../libs/gf180mcu_std_tile.asdl
  sim_lib: ../libs/sim_ngspice.asdl
model_alias:
  nmos_tile_short: gf180mcu_std_tile.nmos_tile_short
  #pmos: gf180mcu_std_tile.pmos_tile_short

modules:
  test:
    ports:
      in: { dir: in, type: signal }
      out: { dir: out, type: signal }
    internal_nets:
      vdd: { type: power }
      vss: { type: power }
    instances:
      vgs:
        model: analoglib.vdc
        mappings:
          plus: g
          minus: vss
        parameters:
          dc: 1
      vds:
        model: analoglib.vdc
        mappings:
          plus: d
          minus: vss
        parameters:
          dc: 0.5
      
      vss:
        model: analoglib.vdc
        mappings:
          plus: vss
          minus: GND
        parameters:
          dc: 0.0

      m1:
        model: nmos_tile_short
        mappings: { D: d, G: g, S: vss, B: vss }
        parameters: {m: 1}

      pdk_model:
        model: analoglib.code_block
        parameters:
          code: |
            .include ../gf180mcu/ngspice/design.ngspice
            .lib ../gf180mcu/ngspice/sm141064.ngspice typical

      sim:
        model: sim_lib.sim_dc
        parameters:
          source: vds
          from: 0
          to: 3.3
          step: 0.05
          raw_file: sim_dc_results.raw